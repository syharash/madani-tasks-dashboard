<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Regional Dashboard</title>
  <style>
    /* Bar Visualization Styles */
    .bar-cell {
      position: relative;
      height: 1.2em;
      min-width: 120px;
      display: flex;
      align-items: center;
    }
    .bar {
      height: 1em;
      margin-right: 6px;
      border-radius: 4px;
      background-color: #ccc;
      transition: width 0.3s ease;
    }
    .bar-label {
      font-weight: bold;
      font-size: 0.9em;
    }
    .bar.positive { background-color: #4caf50; }
    .bar.negative { background-color: #e53935; }
    .bar.neutral  { background-color: #9e9e9e; }

    /* Cascading Dropdown Styles */
    .selector-group {
      margin: 12px 0;
    }
    label {
      display: block;
      margin-bottom: 4px;
      font-weight: bold;
    }
    select {
      padding: 6px;
      margin-bottom: 8px;
      min-width: 200px;
    }
  </style>
</head>
<body>

  <h2>üìç Regional Dashboard</h2>
  <button id="signin-btn">Sign in with Google</button>

  <!-- Option 1: Grouped Flat Dropdown -->
  <div class="selector-group">
    <label for="region-select">Quick Region Picker:</label>
    <select id="region-select">
      <option value="">-- Select from grouped dropdown --</option>

      <optgroup label="USA / California">
        <option value="USA/California/Elk Grove">California ‚Üí Elk Grove</option>
        <option value="USA/California/Riverside">California ‚Üí Riverside</option>
        <option value="USA/California/Sacramento">California ‚Üí Sacramento</option>
        <option value="USA/California/Woodland">California ‚Üí Woodland</option>
        <option value="USA/California/Yuba City">California ‚Üí Yuba City</option>
      </optgroup>

      <optgroup label="USA / Illinois">
        <option value="USA/Illinois/Chicago">Illinois ‚Üí Chicago</option>
        <option value="USA/Illinois/Skokie">Illinois ‚Üí Skokie</option>
      </optgroup>

      <optgroup label="USA / Texas">
        <option value="USA/Texas/Sugar Land">Texas ‚Üí Sugar Land</option>
        <option value="USA/Texas/Wylie">Texas ‚Üí Wylie</option>
      </optgroup>

      <optgroup label="USA">
        <option value="USA">Entire Country</option>
      </optgroup>
    </select>
  </div>

  <!-- Option 2: Cascading Selectors -->
  <div class="selector-group">
    <label for="country-select">Country:</label>
    <select id="country-select">
      <option value="">-- Choose a country --</option>
      <option value="USA">USA</option>
      <option value="Canada">Canada</option>
    </select>

    <label for="state-select">State:</label>
    <select id="state-select" disabled></select>

    <label for="city-select">City:</label>
    <select id="city-select" disabled></select>
  </div>

  <script>
    const regionData = {
      "USA": {
        "California": ["Sacramento", "Woodland", "Yuba City"],
        "Illinois": ["Chicago", "Skokie"],
        "Texas": ["Sugar Land", "Wylie"]
      },
      "Canada": {
        "Ontario": ["Toronto"],
        "Quebec": ["Montreal"]
      }
    };

    const countrySelect = document.getElementById("country-select");
    const stateSelect = document.getElementById("state-select");
    const citySelect = document.getElementById("city-select");

    countrySelect.addEventListener("change", () => {
      const country = countrySelect.value;
      stateSelect.innerHTML = '<option value="">-- Choose a state --</option>';
      citySelect.innerHTML = '<option value="">-- Choose a city --</option>';
      citySelect.disabled = true;

      if (regionData[country]) {
        stateSelect.disabled = false;
        Object.keys(regionData[country]).forEach(state => {
          const opt = new Option(state, state);
          stateSelect.add(opt);
        });
      } else {
        stateSelect.disabled = true;
      }
    });

    stateSelect.addEventListener("change", () => {
      const country = countrySelect.value;
      const state = stateSelect.value;
      citySelect.innerHTML = '<option value="">-- Choose a city --</option>';

      if (regionData[country] && regionData[country][state]) {
        citySelect.disabled = false;
        regionData[country][state].forEach(city => {
          const opt = new Option(city, city);
          citySelect.add(opt);
        });
      } else {
        citySelect.disabled = true;
      }
    });

    citySelect.addEventListener("change", () => {
      const country = countrySelect.value;
      const state = stateSelect.value;
      const city = citySelect.value;
      const regionKey = `${country}/${state}/${city}`;
      // Call your fetch function
      console.log("Selected regionKey:", regionKey);
      fetchSheetData(sheetIndex[regionKey]);
    });

    // Flat dropdown (Option 1) logic
    const regionSelect = document.getElementById("region-select");
    regionSelect.addEventListener("change", () => {
      const regionKey = regionSelect.value;
      if (regionKey) {
        console.log("Selected regionKey:", regionKey);
        fetchSheetData(sheetIndex[regionKey]);
      }
    });
  </script>
<script src="app.js"></script>
</body>
</html>
